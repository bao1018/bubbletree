<script type="text/javascript">
	// $(function() {
	//
	// var $tooltip = $('<div class="tooltip">Tooltip</div>');
	// $('.bubbletree').append($tooltip);
	// $tooltip.hide();
	//
	// var tooltip = function(event) {
	// if (event.type == 'SHOW') {
	// // show tooltip
	// vis4.log(event);
	// $tooltip.css({
	// left : event.mousePos.x + 4,
	// top : event.mousePos.y + 4
	// });
	// $tooltip.html(event.node.label + ' <b>' + event.node.famount + '</b>');
	// var bubble = event.target;
	//
	// $tooltip.show();
	// } else {
	// // hide tooltip
	// $tooltip.hide();
	// }
	// };
	//
	// var dataLoaded = function(data) {
	// // console.log('dataLoaded', JSON.stringify(data));
	// window.bubbleTree = new BubbleTree({
	// data : data,
	//
	// container : '.bubbletree',
	// bubbleType : 'icon',
	// bubbleStyles : {
	// 'cofog-1' : BubbleTree.Styles.Cofog,
	// 'cofog-2' : BubbleTree.Styles.Cofog,
	// 'cofog-3' : BubbleTree.Styles.Cofog
	// },
	// rootPath : '../../',
	// sortBy : 'label',
	// tooltipCallback : tooltip
	// });
	// };
	//
	// // call openspending api for data
	// new OpenSpending.Aggregator({
	// apiUrl : 'http://openspending.org/api',
	// dataset : 'ukgov-finances-cra',
	// rootNodeLabel : 'Grant total',
	// drilldowns : ['cofog1', 'cofog2', 'cofog3'],
	// cuts : ['year:2008'],
	// breakdown : 'region',
	// // localApiCache: 'aggregate.json',
	// callback : dataLoaded
	// });
	//
	// });

	var data = {
		label : "I am a node",
		amount : 1000000
	}

	function generateChildren(node) {
		var numChildren = 8;
		node.children = [];
		var amount = node.amount;
		for (var i = 0; i < numChildren; i++) {
			var child = {
				label : 'Child #' + (i + 1),
				amount : i + 1 < numChildren ? amount * Math.random() * .6 : amount
			};
			amount -= child.amount;
			node.children.push(child);
		}
	}

	generateChildren(data);
	
	var dataVendor = function() {
		var max = 5;
		var sons = [];
		for (var i = 0; i < 5; i++) {
			var num = parseInt(Math.random()*100);
			var son = {
				label : "DummyData-" + num,
				shortLabel : "DummyData-" + num,
				amount : (num + 1) * 10000
			}
			sons.push(son);
		}
		return sons;
	}
	
	$(function() {
		new BubbleTree({
			data : data,
			container : '.bubbletree',
			dataProvider: dataVendor
		});

	}); 
</script>
</head>
<body>
	<div id="header">
		<a class="title">OpenSpending</a>
		<div class="subtitle">
			UK Country Regional Analysis
		</div>
	</div>
	<div class="bubbletree-wrapper">
		<div class="bubbletree"></div>
	</div>
</body>
</html>
